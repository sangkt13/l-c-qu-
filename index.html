<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Gieo Quẻ Tài Lộc</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#D32F2F">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body { margin: 0; padding: env(safe-area-inset-top) 0; background-color: #ffffff; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; }
      .app-container { min-height: 100vh; display: flex; flex-direction: column; }
    </style>
</head>
<body>
    <div class="app-container">
      <!DOCTYPE html><html lang="vi"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Gieo Quẻ Tài Lộc</title><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet"><style>body{margin:0;padding:0;font-family:'Roboto',sans-serif;background-color:#f5f5f5;overflow:hidden;touch-action:none;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}*{box-sizing:border-box}.app-container{width:100%;max-width:480px;height:100%;background:linear-gradient(135deg,#D32F2F 0%,#B71C1C 100%);position:relative;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:20px;box-shadow:0 0 20px rgba(0,0,0,0.5)}.header{text-align:center;margin-top:20px;color:#FFC107;z-index:10}.header h1{margin:0;font-size:28px;text-transform:uppercase;letter-spacing:2px;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}.header p{color:#fff;font-size:14px;margin-top:5px;opacity:0.9}.stage{flex:1;display:flex;align-items:center;justify-content:center;position:relative;width:100%}.tube-container{position:relative;width:140px;height:240px;transform-origin:bottom center}.tube{width:100%;height:100%;background:linear-gradient(90deg,#8D6E63 0%,#5D4037 20%,#4E342E 50%,#5D4037 80%,#8D6E63 100%);border-radius:10px 10px 40px 40px;position:absolute;bottom:0;border:4px solid #3E2723;box-shadow:inset 0 0 20px rgba(0,0,0,0.6),5px 5px 15px rgba(0,0,0,0.3);z-index:2;display:flex;justify-content:center;align-items:center}.tube::after{content:'LỘC';font-size:40px;color:#FFC107;font-weight:bold;border:2px solid #FFC107;padding:10px;border-radius:50%;background:rgba(183,28,28,0.8)}.sticks-group{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);width:100px;height:200px;z-index:1}.stick{position:absolute;bottom:0;width:12px;height:220px;background:#FFECB3;border:1px solid #FFCA28;border-radius:5px;transform-origin:bottom center}.stick:nth-child(1){transform:rotate(-15deg) translateX(-10px)}.stick:nth-child(2){transform:rotate(10deg) translateX(5px)}.stick:nth-child(3){transform:rotate(-5deg) translateX(-2px)}.stick:nth-child(4){transform:rotate(20deg) translateX(15px)}.stick:nth-child(5){transform:rotate(-25deg) translateX(-15px)}.falling-stick{position:absolute;width:16px;height:260px;background:#FFF9C4;border:2px solid #FBC02D;left:50%;bottom:180px;transform:translateX(-50%) rotate(0deg);z-index:0;display:none;box-shadow:0 0 10px rgba(255,215,0,0.8);border-radius:8px;justify-content:center;align-items:center;writing-mode:vertical-rl;font-weight:bold;color:#D32F2F;font-size:14px}.controls{margin-bottom:30px;width:100%;display:flex;justify-content:center}.btn{background:#FFC107;color:#D32F2F;border:none;padding:15px 40px;font-size:18px;font-weight:bold;border-radius:50px;box-shadow:0 4px 15px rgba(0,0,0,0.3);cursor:pointer;transition:all 0.2s;text-transform:uppercase;outline:none}.btn:active{transform:scale(0.95);box-shadow:0 2px 5px rgba(0,0,0,0.3)}.shake-anim{animation:shake 0.5s cubic-bezier(.36,.07,.19,.97) both infinite}.fly-out{animation:flyOut 1s ease-out forwards}@keyframes shake{10%,90%{transform:translate3d(-2px,0,0) rotate(-2deg)}20%,80%{transform:translate3d(4px,0,0) rotate(4deg)}30%,50%,70%{transform:translate3d(-8px,0,0) rotate(-8deg)}40%,60%{transform:translate3d(8px,0,0) rotate(8deg)}}@keyframes flyOut{0%{bottom:20px;opacity:0}20%{opacity:1;z-index:5}100%{bottom:350px;transform:translateX(-50%) rotate(720deg) scale(1.2)}}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:none;justify-content:center;align-items:center;z-index:100;opacity:0;transition:opacity 0.3s}.modal-content{background:#fff;width:90%;max-width:400px;border-radius:20px;padding:30px;text-align:center;box-shadow:0 10px 25px rgba(0,0,0,0.5);border:5px solid #FFC107;transform:scale(0.8);transition:transform 0.3s}.modal-title{font-size:24px;color:#D32F2F;margin-bottom:10px;font-weight:bold}.modal-number{font-size:48px;color:#333;margin:10px 0;font-weight:900}.modal-text{font-size:16px;line-height:1.6;color:#555;margin-bottom:20px}.modal-close{background:#D32F2F;color:#fff;border:none;padding:12px 30px;border-radius:25px;font-size:16px;cursor:pointer;font-weight:bold}.visible{display:flex;opacity:1}.visible .modal-content{transform:scale(1)}</style></head><body><div class="app-container"><div class="header"><h1>Gieo Quẻ</h1><p>Lắc điện thoại để cầu may</p></div><div class="stage"><div class="tube-container" id="tube"><div class="sticks-group"><div class="stick"></div><div class="stick"></div><div class="stick"></div><div class="stick"></div><div class="stick"></div></div><div class="tube"></div></div><div class="falling-stick" id="resultStick"><span>QUẺ SỐ</span></div></div><div class="controls"><button class="btn" id="actionBtn" onclick="requestPermission()">Bắt đầu</button></div></div><div class="modal-overlay" id="modal"><div class="modal-content"><div class="modal-title" id="mTitle">QUẺ ĐẠI CÁT</div><div class="modal-number" id="mNum">01</div><div class="modal-text" id="mText">Thời vận hanh thông, vạn sự như ý. Công danh sự nghiệp thăng tiến không ngừng.</div><button class="modal-close" onclick="closeModal()">Thỉnh quẻ khác</button></div></div><script>const fortunes=[{title:"QUẺ ĐẠI CÁT",text:"Cầu tài đắc tài, cầu lộc đắc lộc. Mọi sự hanh thông, gia đạo bình an."},{title:"QUẺ TRUNG BÌNH",text:"Nên giữ gìn những gì đang có. Chớ vội vàng đầu tư lớn. Bình tĩnh chờ thời."},{title:"QUẺ THƯỢNG CÁT",text:"Quý nhân phù trợ, khó khăn lùi xa. Tình duyên nở rộ, niềm vui ngập tràn."},{title:"QUẺ TIỂU CÁT",text:"Có chút lộc nhỏ, niềm vui bất ngờ. Sức khỏe dồi dào, tâm hồn thư thái."},{title:"QUẺ HẠ HẠ",text:"Cẩn trọng lời ăn tiếng nói. Đề phòng tiểu nhân. Nên làm việc thiện tích đức."},{title:"QUẺ BÌNH AN",text:"Vững tâm bền chí ắt thành công. Mọi sóng gió sẽ qua đi nhẹ nhàng."}];let isShaking=false;let shakeThreshold=15;let lastX,lastY,lastZ;let lastUpdate=0;const tube=document.getElementById('tube');const resultStick=document.getElementById('resultStick');const btn=document.getElementById('actionBtn');const modal=document.getElementById('modal');function initSensor(){if(typeof DeviceMotionEvent.requestPermission==='function'){DeviceMotionEvent.requestPermission().then(response=>{if(response=='granted'){window.addEventListener('devicemotion',handleMotion);btn.innerText="LẮC MẠNH!";btn.onclick=manualShake}else{alert("Cần cấp quyền cảm biến để lắc!")}}).catch(console.error)}else{window.addEventListener('devicemotion',handleMotion);btn.innerText="LẮC MẠNH!";btn.onclick=manualShake}}function requestPermission(){initSensor();manualShake()}function handleMotion(event){let acc=event.accelerationIncludingGravity;let curTime=new Date().getTime();if((curTime-lastUpdate)>100){let diffTime=curTime-lastUpdate;lastUpdate=curTime;let x=acc.x;let y=acc.y;let z=acc.z;let speed=Math.abs(x+y+z-lastX-lastY-lastZ)/diffTime*10000;if(speed>shakeThreshold){onShake()}lastX=x;lastY=y;lastZ=z}}function manualShake(){onShake()}function onShake(){if(isShaking)return;isShaking=true;if(navigator.vibrate)navigator.vibrate(200);tube.classList.add('shake-anim');btn.innerText="Đang gieo quẻ...";setTimeout(()=>{tube.classList.remove('shake-anim');showResult()},2000)}function showResult(){const randomId=Math.floor(Math.random()*60)+1;const fortune=fortunes[Math.floor(Math.random()*fortunes.length)];resultStick.style.display='flex';resultStick.innerHTML=`<span>SỐ ${randomId}</span>`;resultStick.classList.add('fly-out');if(navigator.vibrate)navigator.vibrate([100,50,100]);setTimeout(()=>{document.getElementById('mTitle').innerText=fortune.title;document.getElementById('mNum').innerText=randomId<10?`0${randomId}`:randomId;document.getElementById('mText').innerText=fortune.text;modal.classList.add('visible');isShaking=false;resultStick.style.display='none';resultStick.classList.remove('fly-out');btn.innerText="LẮC TIẾP";},1200)}function closeModal(){modal.classList.remove('visible')}</script></body></html>
    </div>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('sw.js');
        });
      }
    </script>
</body>
</html>